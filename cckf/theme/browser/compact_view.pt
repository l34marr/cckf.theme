<html lang="en-US"
 xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US"
 metal:use-macro="here/main_template/macros/master"
 i18n:domain="cckf.theme">

<body>

<metal:content-core fill-slot="content-core">

<metal:main_macro define-macro="content-core"
 tal:define="result python:view.getContent(videos=1, folders=1, others=1);
             videos result/videos;
             albums result/folders;
             otherContents result/others;
             Batch python:modules['Products.CMFPlone'].Batch;
             b_start python:request.get('b_start', 0);
             templateId template/getId;
             batch python:Batch(videos, 12, int(b_start), orphan=1)">

  <div metal:define-macro="text-field-view"
   id="parent-fieldname-text" class="stx"
   tal:define="has_text exists:context/aq_explicit/getText;
               text python:has_text and here.getText() or ''"
   tal:condition="text"
   tal:attributes="class python: here.Format() in ('text/structured',
                   'text/x-rst', ) and 'stx' or 'plain'">
    <div metal:define-slot="inside" tal:replace="structure text">The body</div>
  </div>

  <tal:albumsvideos tal:condition="python:albums or videos">
    <tal:videos tal:condition="batch" tal:repeat="video batch">
      <div class="photoAlbumEntry">
        <a tal:define="id python:int(b_start)+int(repeat['video'].number()-1);
                       scale video/@@images;
                       img_tag python:scale.scale('image', scale='thumb').tag()"
         tal:attributes="href string:${video/absolute_url}/view;
                         title video/Description">
          <span class="photoAlbumEntryWrapper">
            <img src="" alt="" tal:replace="structure img_tag" />
          </span>
          <span class="photoAlbumEntryTitle" tal:content="video/pretty_title_or_id">
            Title
          </span>
        </a>
      </div>
    </tal:videos>

    <div class="visualClear"><!-- --></div>

  </tal:albumsvideos>

  <p class="discreet"
   i18n:domain="atcontenttypes"
   i18n:translate="text_no_albums_uploaded"
   tal:condition="python:not (albums or videos)">
    No albums or photos uploaded yet.
  </p>

  <div tal:condition="python:albums or videos"
   metal:use-macro="here/batch_macros/macros/navigation" />

  <tal:listing condition="otherContents"
   define="folderContents otherContents">
    <metal:listing metal:use-macro="here/folder_listing/macros/listing">
      <metal:empty metal:fill-slot="no_items_in_listing"></metal:empty>
    </metal:listing>
  </tal:listing>

</metal:main_macro>
</metal:content-core>

</body>

</html>
